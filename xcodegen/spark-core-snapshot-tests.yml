name: Spark
include:
  - spark-core.yml

packages:
  SparkCommon:
    url: https://github.com/adevinta/spark-ios-common
    branch: main
  SparkTheming:
    url: https://github.com/adevinta/spark-ios-theming
    branch: main

targetTemplates:
  SparkCoreSnapshotTestsTemplate:
    type: bundle.unit-test
    platform: iOS
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: "com.adevinta.spark.core.snapshot-tests"
        SUPPORTED_PLATFORMS: "iphoneos iphonesimulator"
        SUPPORTS_MACCATALYST: NO
        SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD: NO
        PRODUCT_NAME: SparkCoreSnapshotTests
    sources:
      - path: ../core/Unit-tests
      - path: ../core/Sources
        includes:
        - "**/*SnapshotTest*.swift"
      - path: ../spark/Sources/Resources
        excludes:
        - "**/*Tests*.swift"

    dependencies:
      - target: SparkCore
      - package: SparkCommon
        product: SparkCommonTesting
      - package: SparkCommon
        product: SparkCommonSnapshotTesting
      - package: SparkTheming
        product: SparkTheme
      - package: SparkTheming
        product: SparkThemingTesting

targets:
  SparkCoreSnapshotTests:
    templates:
      - SparkCoreSnapshotTestsTemplate
